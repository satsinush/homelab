server:
    # Number of threads (adjust based on your CPU cores, Pi 5 has 4 cores)
    num-threads: 2
    
    # Cache sizes from your config
    msg-cache-size: 50m
    rrset-cache-size: 100m
    
    # --- CRITICAL DOCKER CHANGES ---
    # Listen on all interfaces inside the container, not just localhost
    interface: 0.0.0.0
    port: 53
    
    # Allow queries from Docker's private network ranges
    # This replaces 'access-control: 127.0.0.1 allow'
    access-control: 127.0.0.1/32 allow
    access-control: 172.16.0.0/12 allow
    access-control: 192.168.0.0/16 allow
    
    # Enable IPv4, UDP, and TCP
    do-ip4: yes
    do-udp: yes
    do-tcp: yes
    do-ip6: no # Changed to no, as per my previous recommendation unless you have native IPv6
    
    # Prefetching for performance
    prefetch: yes
    
    # Privacy and security hardening
    hide-version: yes
    hide-identity: yes
    harden-glue: yes
    harden-dnssec-stripped: yes
    use-caps-for-id: yes
    
    # Private domains from your config
    private-domain: "lan"
    private-domain: "local"
    private-domain: "home.arpa"
    
    # Log verbosity
    verbosity: 0