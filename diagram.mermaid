%%{init: {
    "theme": "dark"
}}%%
graph TD
    %% INTERNET
    subgraph Internet
        RemoteClient[ðŸŒ Remote User]
    end

    %% LAN
    subgraph LAN
        Router[ðŸ“¶ Router]
        LocalClient[ðŸ’» Local Devices]

        subgraph Server[ðŸ–¥ï¸ Homelab Server]
            WireGuard[ðŸ”’ WireGuard VPN]
            UFW[ðŸ›¡ï¸ UFW Firewall]

            subgraph Docker[ðŸ³ Docker Network]
                Nginx[ðŸŒ NGINX Reverse Proxy]
                Authelia[ðŸ”‘ Authelia SSO]
                Vaultwarden[ðŸ” Vaultwarden]
                Portainer[ðŸ“¦ Portainer]
                Dashboard[ðŸ  Homelab Dashboard]
                Ollama[ðŸ¤– Ollama AI]
                Netdata[ðŸ“Š Netdata Monitoring]
                UptimeKuma[â±ï¸ Uptime Kuma]
                Ntfy[ðŸ“¨ ntfy Notifications]
                LLDAP[ðŸ‘¥ LLDAP]
                Pihole[ðŸ›‘ Pi-hole DNS]
                Unbound[ðŸ”Ž Unbound DNS Resolver]
                Rustdesk[ðŸ–¥ï¸ RustDesk ID & Relay]
            end
        end
    end

    %% Entry chain
    RemoteClient --> Router --> WireGuard --> UFW
    LocalClient --> UFW

    %% DNS chain
    Pihole --> Unbound
    UFW -->|DNS| Pihole

    %% Firewall routes
    UFW -->|HTTP| Nginx
    UFW -->|Remote Access| Rustdesk --> LocalClient

    %% Proxy/Auth flows
    Nginx --> Authelia
    Nginx --> Vaultwarden
    Nginx --> Ntfy
    Nginx --> Portainer
    Nginx --> Dashboard
    Nginx --> Netdata
    Nginx --> UptimeKuma
    Nginx --> Ntfy

    Authelia --> LLDAP

    %% Dashboard flows
    Dashboard --> Ollama
    Dashboard --> Netdata
    Dashboard -->|WOL| LocalClient
    Dashboard --> Ntfy

    %% Notifications
    UptimeKuma --> Ntfy
    Vaultwarden --> Ntfy